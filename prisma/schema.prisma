generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL") 
}

enum State {
  AC
  AL
  AP
  AM
  BA
  CE
  DF
  ES
  GO
  MA
  MT
  MS
  MG
  PA
  PB
  PR
  PE
  PI
  RJ
  RN
  RS
  RO
  RR
  SC
  SP
  SE
  TO
}

model User {
  id        String   @id @default(uuid()) 
  name      String   
  email     String   @unique 
  password  String  

  addresses Address[] @relation("UserAddresses") 
  phones    Phone[]   @relation("UserPhones")

  createdAt DateTime @default(now()) 
  updatedAt DateTime @updatedAt      
}

model Address {
  id           String   @id @default(uuid()) 
  street       String   
  number       String   
  zipCode      String   
  neighborhood String  
  complement   String?  
  state        State 

  userId       String
  user         User     @relation("UserAddresses", fields: [userId], references: [id], onDelete: Cascade)

  createdAt    DateTime @default(now()) 
  updatedAt    DateTime @updatedAt     
}

model Phone {
  id          String  @id @default(uuid())
  phoneNumber String  
  isWhatsapp  Boolean @default(false) 
  isPrimary   Boolean @default(false) 

  userId      String  
  user        User    @relation("UserPhones", fields: [userId], references: [id], onDelete: Cascade) 

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
